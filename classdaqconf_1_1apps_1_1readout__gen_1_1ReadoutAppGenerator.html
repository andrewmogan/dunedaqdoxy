<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DUNE-DAQ: daqconf.apps.readout_gen.ReadoutAppGenerator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DUNE-DAQ
   </div>
   <div id="projectbrief">DUNE Trigger and Data Acquisition software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedaqconf.html">daqconf</a></li><li class="navelem"><a class="el" href="namespacedaqconf_1_1apps.html">apps</a></li><li class="navelem"><a class="el" href="namespacedaqconf_1_1apps_1_1readout__gen.html">readout_gen</a></li><li class="navelem"><a class="el" href="classdaqconf_1_1apps_1_1readout__gen_1_1ReadoutAppGenerator.html">ReadoutAppGenerator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classdaqconf_1_1apps_1_1readout__gen_1_1ReadoutAppGenerator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">daqconf.apps.readout_gen.ReadoutAppGenerator Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a50d43202f21730b7483bf1e04cdc6612" id="r_a50d43202f21730b7483bf1e04cdc6612"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50d43202f21730b7483bf1e04cdc6612">__init__</a> (self, readout_cfg, <a class="el" href="#aace151c112abed5b85d1e290c2feabb0">det_cfg</a>, <a class="el" href="#abb74a5b639bbf37f36c53bb6ac4c3ba5">daq_cfg</a>)</td></tr>
<tr class="separator:a50d43202f21730b7483bf1e04cdc6612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c9b4d82eece5c83a9d0427f8c6bb98" id="r_a37c9b4d82eece5c83a9d0427f8c6bb98"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a37c9b4d82eece5c83a9d0427f8c6bb98">get_numa_cfg</a> (self, RU_DESCRIPTOR)</td></tr>
<tr class="separator:a37c9b4d82eece5c83a9d0427f8c6bb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75bedd4dd37be9ceb7efc9cebe74a81c" id="r_a75bedd4dd37be9ceb7efc9cebe74a81c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75bedd4dd37be9ceb7efc9cebe74a81c">get_lcore_config</a> (self, RU_DESCRIPTOR)</td></tr>
<tr class="separator:a75bedd4dd37be9ceb7efc9cebe74a81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a667d9d1a4862f1d43be348c8afe91c7f" id="r_a667d9d1a4862f1d43be348c8afe91c7f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a667d9d1a4862f1d43be348c8afe91c7f">compute_data_types</a> (self, stream_entry)</td></tr>
<tr class="memdesc:a667d9d1a4862f1d43be348c8afe91c7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the frament types from detector infos.  <br /></td></tr>
<tr class="separator:a667d9d1a4862f1d43be348c8afe91c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11fb89d778d681c13ed808be1d94d8b8" id="r_a11fb89d778d681c13ed808be1d94d8b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11fb89d778d681c13ed808be1d94d8b8">create_cardreader</a> (self, RU_DESCRIPTOR, data_file_map)</td></tr>
<tr class="memdesc:a11fb89d778d681c13ed808be1d94d8b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create card readers "Abstract" method.  <br /></td></tr>
<tr class="separator:a11fb89d778d681c13ed808be1d94d8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac285fa0c5185bfe560758e46fd60c4e1" id="r_ac285fa0c5185bfe560758e46fd60c4e1"><td class="memItemLeft" align="right" valign="top">tuple[list, list]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac285fa0c5185bfe560758e46fd60c4e1">create_det_dhl</a> (self, int LATENCY_BUFFER_NUMA_AWARE, int LATENCY_BUFFER_ALLOCATION_MODE, int NUMA_ID, bool SEND_PARTIAL_FRAGMENTS, int DATA_REQUEST_TIMEOUT, RU_DESCRIPTOR)</td></tr>
<tr class="memdesc:ac285fa0c5185bfe560758e46fd60c4e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create detector datalink handlers.  <br /></td></tr>
<tr class="separator:ac285fa0c5185bfe560758e46fd60c4e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad532f3cb3521d0d8460c7513dae50506" id="r_ad532f3cb3521d0d8460c7513dae50506"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad532f3cb3521d0d8460c7513dae50506">add_tp_processing</a> (self, list dlh_list, str TPG_CHANNEL_MAP)</td></tr>
<tr class="memdesc:ad532f3cb3521d0d8460c7513dae50506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable processing in DLHs.  <br /></td></tr>
<tr class="separator:ad532f3cb3521d0d8460c7513dae50506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb4d0b3d8d3ded6ef80c369cc25363d8" id="r_acb4d0b3d8d3ded6ef80c369cc25363d8"><td class="memItemLeft" align="right" valign="top">tuple[list, list]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb4d0b3d8d3ded6ef80c369cc25363d8">create_tp_dlhs</a> (self, list dlh_list, int DATA_REQUEST_TIMEOUT, int FRAGMENT_SEND_TIMEOUT, int tpset_sid)</td></tr>
<tr class="memdesc:acb4d0b3d8d3ded6ef80c369cc25363d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create TP data link handlers.  <br /></td></tr>
<tr class="separator:acb4d0b3d8d3ded6ef80c369cc25363d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a594b400d564d517ca46dc1bd4a115916" id="r_a594b400d564d517ca46dc1bd4a115916"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a594b400d564d517ca46dc1bd4a115916">add_dro_eps_and_fps</a> (self, <a class="el" href="classdaqconf_1_1core_1_1app_1_1ModuleGraph.html">ModuleGraph</a> mgraph, list dlh_list, str RUIDX)</td></tr>
<tr class="memdesc:a594b400d564d517ca46dc1bd4a115916"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add detector endpoints and fragment producers.  <br /></td></tr>
<tr class="separator:a594b400d564d517ca46dc1bd4a115916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdab6e8d912e8730715919bb837ca10a" id="r_afdab6e8d912e8730715919bb837ca10a"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afdab6e8d912e8730715919bb837ca10a">add_tpg_eps_and_fps</a> (self, <a class="el" href="classdaqconf_1_1core_1_1app_1_1ModuleGraph.html">ModuleGraph</a> mgraph, list tpg_dlh_list, str RUIDX)</td></tr>
<tr class="memdesc:afdab6e8d912e8730715919bb837ca10a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add tpg endpoints and fragment producers.  <br /></td></tr>
<tr class="separator:afdab6e8d912e8730715919bb837ca10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b63fd60e4c68f0fe9acd6aca75b2f8b" id="r_a5b63fd60e4c68f0fe9acd6aca75b2f8b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b63fd60e4c68f0fe9acd6aca75b2f8b">add_data_volumes</a> (self, readout_app, data_file_map)</td></tr>
<tr class="separator:a5b63fd60e4c68f0fe9acd6aca75b2f8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5de4deae41b02d64e46ab9abe2e2ceae" id="r_a5de4deae41b02d64e46ab9abe2e2ceae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5de4deae41b02d64e46ab9abe2e2ceae">add_volumes_resources</a> (self, readout_app, RU_DESCRIPTOR)</td></tr>
<tr class="separator:a5de4deae41b02d64e46ab9abe2e2ceae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac22962b23b939688c02691e9b242c7e" id="r_aac22962b23b939688c02691e9b242c7e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac22962b23b939688c02691e9b242c7e">generate</a> (self, RU_DESCRIPTOR, SOURCEID_BROKER, data_file_map, data_timeout_requests)</td></tr>
<tr class="separator:aac22962b23b939688c02691e9b242c7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8392fd073c7360c6caf83deff84b84cc" id="r_a8392fd073c7360c6caf83deff84b84cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdaqconf_1_1core_1_1app_1_1App.html">App</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8392fd073c7360c6caf83deff84b84cc">create_fake_readout_app</a> (self, RU_DESCRIPTOR, CLOCK_SPEED_HZ)</td></tr>
<tr class="memdesc:a8392fd073c7360c6caf83deff84b84cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create Fake dataproducers Application.  <br /></td></tr>
<tr class="separator:a8392fd073c7360c6caf83deff84b84cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae19e50560405b2db6925d3f194779e14" id="r_ae19e50560405b2db6925d3f194779e14"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae19e50560405b2db6925d3f194779e14">ro_cfg</a></td></tr>
<tr class="separator:ae19e50560405b2db6925d3f194779e14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace151c112abed5b85d1e290c2feabb0" id="r_aace151c112abed5b85d1e290c2feabb0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aace151c112abed5b85d1e290c2feabb0">det_cfg</a></td></tr>
<tr class="separator:aace151c112abed5b85d1e290c2feabb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb74a5b639bbf37f36c53bb6ac4c3ba5" id="r_abb74a5b639bbf37f36c53bb6ac4c3ba5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb74a5b639bbf37f36c53bb6ac4c3ba5">daq_cfg</a></td></tr>
<tr class="separator:abb74a5b639bbf37f36c53bb6ac4c3ba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc4f80add0223e76a88ad8b94088323c" id="r_abc4f80add0223e76a88ad8b94088323c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc4f80add0223e76a88ad8b94088323c">numa_excpt</a></td></tr>
<tr class="separator:abc4f80add0223e76a88ad8b94088323c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb40b63149d1eea454f63d26d4540535" id="r_abb40b63149d1eea454f63d26d4540535"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb40b63149d1eea454f63d26d4540535">lcores_excpt</a></td></tr>
<tr class="separator:abb40b63149d1eea454f63d26d4540535"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a25c3f18b95d2318496d301fbf80a6909" id="r_a25c3f18b95d2318496d301fbf80a6909"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25c3f18b95d2318496d301fbf80a6909">dlh_plugin</a> = None</td></tr>
<tr class="separator:a25c3f18b95d2318496d301fbf80a6909"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98ffb37a26cccb73927aad56eee4019d" id="r_a98ffb37a26cccb73927aad56eee4019d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98ffb37a26cccb73927aad56eee4019d">numa_id</a> = 1</td></tr>
<tr class="separator:a98ffb37a26cccb73927aad56eee4019d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Utility class to generate readout applications</pre> 
<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00033">33</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a50d43202f21730b7483bf1e04cdc6612" name="a50d43202f21730b7483bf1e04cdc6612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50d43202f21730b7483bf1e04cdc6612">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>readout_cfg</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>det_cfg</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>daq_cfg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00039">39</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   39</span>    <span class="keyword">def </span>__init__(self, readout_cfg, det_cfg, daq_cfg):</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>        self.ro_cfg = readout_cfg</div>
<div class="line"><span class="lineno">   42</span>        self.det_cfg = det_cfg</div>
<div class="line"><span class="lineno">   43</span>        self.daq_cfg = daq_cfg</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>        numa_excpt = {}</div>
<div class="line"><span class="lineno">   46</span>        <span class="keywordflow">for</span> ex <span class="keywordflow">in</span> self.ro_cfg.numa_config[<span class="stringliteral">&#39;exceptions&#39;</span>]:</div>
<div class="line"><span class="lineno">   47</span>            numa_excpt[(ex[<span class="stringliteral">&#39;host&#39;</span>], ex[<span class="stringliteral">&#39;card&#39;</span>])] = ex</div>
<div class="line"><span class="lineno">   48</span>        self.numa_excpt = numa_excpt</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>        lcores_excpt = {}</div>
<div class="line"><span class="lineno">   51</span>        <span class="keywordflow">for</span> ex <span class="keywordflow">in</span> self.ro_cfg.dpdk_lcores_config[<span class="stringliteral">&#39;exceptions&#39;</span>]:</div>
<div class="line"><span class="lineno">   52</span>            lcores_excpt[(ex[<span class="stringliteral">&#39;host&#39;</span>], ex[<span class="stringliteral">&#39;iface&#39;</span>])] = ex</div>
<div class="line"><span class="lineno">   53</span>        self.lcores_excpt = lcores_excpt</div>
<div class="line"><span class="lineno">   54</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5b63fd60e4c68f0fe9acd6aca75b2f8b" name="a5b63fd60e4c68f0fe9acd6aca75b2f8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b63fd60e4c68f0fe9acd6aca75b2f8b">&#9670;&#160;</a></span>add_data_volumes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.add_data_volumes </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>readout_app</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>data_file_map</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00355">355</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  355</span>    <span class="keyword">def </span>add_data_volumes(self, readout_app, data_file_map):</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>        cfg = self.ro_cfg</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>        dir_names = set()</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>        <span class="comment"># Add data mountpoints</span></div>
<div class="line"><span class="lineno">  362</span>        cvmfs = Path(<span class="stringliteral">&#39;/cvmfs&#39;</span>)</div>
<div class="line"><span class="lineno">  363</span>        ddf_path = Path(cfg.default_data_file)</div>
<div class="line"><span class="lineno">  364</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> cvmfs <span class="keywordflow">in</span> ddf_path.parents:</div>
<div class="line"><span class="lineno">  365</span>            dir_names.add(ddf_path.parent)</div>
<div class="line"><span class="lineno">  366</span> </div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">for</span> file <span class="keywordflow">in</span> data_file_map.values():</div>
<div class="line"><span class="lineno">  368</span>            f = Path(file)</div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> cvmfs <span class="keywordflow">in</span> f.parents:</div>
<div class="line"><span class="lineno">  370</span>                dir_names.add(f.parent)</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>        <span class="keywordflow">for</span> dir_idx, dir_name <span class="keywordflow">in</span> enumerate(dir_names):</div>
<div class="line"><span class="lineno">  373</span>            readout_app.mounted_dirs += [{</div>
<div class="line"><span class="lineno">  374</span>                <span class="stringliteral">&#39;name&#39;</span>: f<span class="stringliteral">&#39;data-file-{dir_idx}&#39;</span>,</div>
<div class="line"><span class="lineno">  375</span>                <span class="stringliteral">&#39;physical_location&#39;</span>: dir_name,</div>
<div class="line"><span class="lineno">  376</span>                <span class="stringliteral">&#39;in_pod_location&#39;</span>:   dir_name,</div>
<div class="line"><span class="lineno">  377</span>                <span class="stringliteral">&#39;read_only&#39;</span>: <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  378</span>            }]</div>
<div class="line"><span class="lineno">  379</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a594b400d564d517ca46dc1bd4a115916" name="a594b400d564d517ca46dc1bd4a115916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a594b400d564d517ca46dc1bd4a115916">&#9670;&#160;</a></span>add_dro_eps_and_fps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None daqconf.apps.readout_gen.ReadoutAppGenerator.add_dro_eps_and_fps </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdaqconf_1_1core_1_1app_1_1ModuleGraph.html">ModuleGraph</a></td>          <td class="paramname"><span class="paramname"><em>mgraph</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>dlh_list</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>RUIDX</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add detector endpoints and fragment producers. </p>
<pre class="fragment">Adds detector readout endpoints and fragment producers</pre> 
<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00287">287</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  292</span>        ) -&gt; <span class="keywordtype">None</span>: </div>
<div class="line"><span class="lineno">  293</span>        <span class="stringliteral">&quot;&quot;&quot;Adds detector readout endpoints and fragment producers&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">for</span> dlh <span class="keywordflow">in</span> dlh_list:</div>
<div class="line"><span class="lineno">  295</span>            <span class="comment"># extract source ids</span></div>
<div class="line"><span class="lineno">  296</span>            dro_sid = dlh.conf.readoutmodelconf[<span class="stringliteral">&#39;source_id&#39;</span>]</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>            mgraph.add_fragment_producer(</div>
<div class="line"><span class="lineno">  299</span>                id = dro_sid, </div>
<div class="line"><span class="lineno">  300</span>                subsystem = <span class="stringliteral">&quot;Detector_Readout&quot;</span>,</div>
<div class="line"><span class="lineno">  301</span>                requests_in   = f<span class="stringliteral">&quot;datahandler_{dro_sid}.request_input&quot;</span>,</div>
<div class="line"><span class="lineno">  302</span>                fragments_out = f<span class="stringliteral">&quot;datahandler_{dro_sid}.fragment_queue&quot;</span></div>
<div class="line"><span class="lineno">  303</span>            )</div>
<div class="line"><span class="lineno">  304</span>            mgraph.add_endpoint(</div>
<div class="line"><span class="lineno">  305</span>                f<span class="stringliteral">&quot;timesync_ru{RUIDX}_{dro_sid}&quot;</span>,</div>
<div class="line"><span class="lineno">  306</span>                f<span class="stringliteral">&quot;datahandler_{dro_sid}.timesync_output&quot;</span>,</div>
<div class="line"><span class="lineno">  307</span>                <span class="stringliteral">&quot;TimeSync&quot;</span>,   Direction.OUT,</div>
<div class="line"><span class="lineno">  308</span>                is_pubsub=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  309</span>                toposort=<span class="keyword">False</span></div>
<div class="line"><span class="lineno">  310</span>            )</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad532f3cb3521d0d8460c7513dae50506" name="ad532f3cb3521d0d8460c7513dae50506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad532f3cb3521d0d8460c7513dae50506">&#9670;&#160;</a></span>add_tp_processing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list daqconf.apps.readout_gen.ReadoutAppGenerator.add_tp_processing </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>dlh_list</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>TPG_CHANNEL_MAP</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable processing in DLHs. </p>

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00169">169</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  173</span>        ) -&gt; list:</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>        cfg = self.ro_cfg</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>        modules = []</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>        <span class="comment"># defaults hardcoded values</span></div>
<div class="line"><span class="lineno">  180</span>        default_error_counter_threshold=100</div>
<div class="line"><span class="lineno">  181</span>        default_error_reset_freq=10000</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>        <span class="comment"># Loop over datalink handlers to re-define the data processor configuration</span></div>
<div class="line"><span class="lineno">  185</span>        <span class="keywordflow">for</span> dlh <span class="keywordflow">in</span> dlh_list:</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>            <span class="comment"># Recover the raw data link source id</span></div>
<div class="line"><span class="lineno">  188</span>            <span class="comment"># MOOOOOO</span></div>
<div class="line"><span class="lineno">  189</span>            dro_sid = dlh.conf.readoutmodelconf[<span class="stringliteral">&quot;source_id&quot;</span>]</div>
<div class="line"><span class="lineno">  190</span>            geo_cid = dlh.conf.rawdataprocessorconf[<span class="stringliteral">&quot;crate_id&quot;</span>]</div>
<div class="line"><span class="lineno">  191</span>            geo_sid = dlh.conf.rawdataprocessorconf[<span class="stringliteral">&quot;slot_id&quot;</span>]</div>
<div class="line"><span class="lineno">  192</span>            geo_lid = dlh.conf.rawdataprocessorconf[<span class="stringliteral">&quot;link_id&quot;</span>]</div>
<div class="line"><span class="lineno">  193</span>            <span class="comment"># Re-create the module with an extended configuration</span></div>
<div class="line"><span class="lineno">  194</span>            modules += [DAQModule(</div>
<div class="line"><span class="lineno">  195</span>                name = dlh.name,</div>
<div class="line"><span class="lineno">  196</span>                plugin = dlh.plugin,</div>
<div class="line"><span class="lineno">  197</span>                conf = rconf.Conf(</div>
<div class="line"><span class="lineno">  198</span>                    readoutmodelconf = dlh.conf.readoutmodelconf,</div>
<div class="line"><span class="lineno">  199</span>                    latencybufferconf = dlh.conf.latencybufferconf,</div>
<div class="line"><span class="lineno">  200</span>                    requesthandlerconf = dlh.conf.requesthandlerconf,</div>
<div class="line"><span class="lineno">  201</span>                    rawdataprocessorconf= rconf.RawDataProcessorConf(</div>
<div class="line"><span class="lineno">  202</span>                        source_id = dro_sid,</div>
<div class="line"><span class="lineno">  203</span>                        crate_id = geo_cid,</div>
<div class="line"><span class="lineno">  204</span>                        slot_id = geo_sid,</div>
<div class="line"><span class="lineno">  205</span>                        link_id = geo_lid,</div>
<div class="line"><span class="lineno">  206</span>                        enable_tpg = <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  207</span>                        tpg_threshold = cfg.tpg_threshold,</div>
<div class="line"><span class="lineno">  208</span>                        tpg_algorithm = cfg.tpg_algorithm,</div>
<div class="line"><span class="lineno">  209</span>                        tpg_channel_mask = cfg.tpg_channel_mask,</div>
<div class="line"><span class="lineno">  210</span>                        channel_map_name = TPG_CHANNEL_MAP,</div>
<div class="line"><span class="lineno">  211</span>                        emulator_mode = cfg.emulator_mode,</div>
<div class="line"><span class="lineno">  212</span>                        clock_speed_hz = (self.det_cfg.clock_speed_hz / self.daq_cfg.data_rate_slowdown_factor),</div>
<div class="line"><span class="lineno">  213</span>                        error_counter_threshold=default_error_counter_threshold,</div>
<div class="line"><span class="lineno">  214</span>                        error_reset_freq=default_error_reset_freq</div>
<div class="line"><span class="lineno">  215</span>                    ),</div>
<div class="line"><span class="lineno">  216</span>                )</div>
<div class="line"><span class="lineno">  217</span>            )]</div>
<div class="line"><span class="lineno">  218</span>            </div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">return</span> modules</div>
<div class="line"><span class="lineno">  220</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afdab6e8d912e8730715919bb837ca10a" name="afdab6e8d912e8730715919bb837ca10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdab6e8d912e8730715919bb837ca10a">&#9670;&#160;</a></span>add_tpg_eps_and_fps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None daqconf.apps.readout_gen.ReadoutAppGenerator.add_tpg_eps_and_fps </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdaqconf_1_1core_1_1app_1_1ModuleGraph.html">ModuleGraph</a></td>          <td class="paramname"><span class="paramname"><em>mgraph</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>tpg_dlh_list</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>RUIDX</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add tpg endpoints and fragment producers. </p>
<pre class="fragment">Adds detector readout endpoints and fragment producers</pre> 
<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00317">317</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  322</span>        ) -&gt; <span class="keywordtype">None</span>: </div>
<div class="line"><span class="lineno">  323</span>        <span class="stringliteral">&quot;&quot;&quot;Adds detector readout endpoints and fragment producers&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>        <span class="keywordflow">for</span> dlh <span class="keywordflow">in</span> tpg_dlh_list:</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>            <span class="comment"># extract source ids</span></div>
<div class="line"><span class="lineno">  328</span>            tpset_sid = dlh.conf.readoutmodelconf[<span class="stringliteral">&#39;source_id&#39;</span>]</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>            <span class="comment"># Add enpointis with this source id for timesync and TPSets</span></div>
<div class="line"><span class="lineno">  331</span>            mgraph.add_endpoint(</div>
<div class="line"><span class="lineno">  332</span>                f<span class="stringliteral">&quot;timesync_tp_dlh_ru{RUIDX}_{tpset_sid}&quot;</span>,</div>
<div class="line"><span class="lineno">  333</span>                f<span class="stringliteral">&quot;tp_datahandler_{tpset_sid}.timesync_output&quot;</span>,</div>
<div class="line"><span class="lineno">  334</span>                <span class="stringliteral">&quot;TimeSync&quot;</span>,</div>
<div class="line"><span class="lineno">  335</span>                Direction.OUT,</div>
<div class="line"><span class="lineno">  336</span>                is_pubsub=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  337</span>            )</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>            mgraph.add_endpoint(</div>
<div class="line"><span class="lineno">  340</span>                    f<span class="stringliteral">&quot;tpsets_tplink{tpset_sid}&quot;</span>,</div>
<div class="line"><span class="lineno">  341</span>                    f<span class="stringliteral">&quot;tp_datahandler_{tpset_sid}.tpset_out&quot;</span>,</div>
<div class="line"><span class="lineno">  342</span>                    <span class="stringliteral">&quot;TPSet&quot;</span>,</div>
<div class="line"><span class="lineno">  343</span>                    Direction.OUT,</div>
<div class="line"><span class="lineno">  344</span>                    is_pubsub=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  345</span>                )</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>            <span class="comment"># Add Fragment producer with this source id</span></div>
<div class="line"><span class="lineno">  348</span>            mgraph.add_fragment_producer(</div>
<div class="line"><span class="lineno">  349</span>                id = tpset_sid, subsystem = <span class="stringliteral">&quot;Trigger&quot;</span>,</div>
<div class="line"><span class="lineno">  350</span>                requests_in   = f<span class="stringliteral">&quot;tp_datahandler_{tpset_sid}.request_input&quot;</span>,</div>
<div class="line"><span class="lineno">  351</span>                fragments_out = f<span class="stringliteral">&quot;tp_datahandler_{tpset_sid}.fragment_queue&quot;</span></div>
<div class="line"><span class="lineno">  352</span>            )</div>
<div class="line"><span class="lineno">  353</span>        </div>
<div class="line"><span class="lineno">  354</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5de4deae41b02d64e46ab9abe2e2ceae" name="a5de4deae41b02d64e46ab9abe2e2ceae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5de4deae41b02d64e46ab9abe2e2ceae">&#9670;&#160;</a></span>add_volumes_resources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.add_volumes_resources </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>readout_app</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>RU_DESCRIPTOR</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00380">380</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  380</span>    <span class="keyword">def </span>add_volumes_resources(self, readout_app, RU_DESCRIPTOR):</div>
<div class="line"><span class="lineno">  381</span>        <span class="keywordflow">raise</span> NotImplementedError(<span class="stringliteral">&quot;create_cardreader must be implemented in detived classes!&quot;</span>)</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="a667d9d1a4862f1d43be348c8afe91c7f" name="a667d9d1a4862f1d43be348c8afe91c7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a667d9d1a4862f1d43be348c8afe91c7f">&#9670;&#160;</a></span>compute_data_types()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.compute_data_types </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stream_entry</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the frament types from detector infos. </p>

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00081">81</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   81</span>    <span class="keyword">def </span>compute_data_types(self, stream_entry):</div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">raise</span> NotImplementedError(<span class="stringliteral">&quot;compute_data_types must be implemented in derived classes!&quot;</span>)</div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordflow">return</span> [],[],[],[],[]</div>
<div class="line"><span class="lineno">   84</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a11fb89d778d681c13ed808be1d94d8b8" name="a11fb89d778d681c13ed808be1d94d8b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11fb89d778d681c13ed808be1d94d8b8">&#9670;&#160;</a></span>create_cardreader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.create_cardreader </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>RU_DESCRIPTOR</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>data_file_map</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create card readers "Abstract" method. </p>

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00089">89</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   89</span>    <span class="keyword">def </span>create_cardreader(self, RU_DESCRIPTOR, data_file_map):</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">raise</span> NotImplementedError(<span class="stringliteral">&quot;create_cardreader must be implemented in detived classes!&quot;</span>)</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordflow">return</span> [],[]</div>
<div class="line"><span class="lineno">   94</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac285fa0c5185bfe560758e46fd60c4e1" name="ac285fa0c5185bfe560758e46fd60c4e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac285fa0c5185bfe560758e46fd60c4e1">&#9670;&#160;</a></span>create_det_dhl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> tuple[list, list] daqconf.apps.readout_gen.ReadoutAppGenerator.create_det_dhl </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>LATENCY_BUFFER_NUMA_AWARE</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>LATENCY_BUFFER_ALLOCATION_MODE</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>NUMA_ID</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>SEND_PARTIAL_FRAGMENTS</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>DATA_REQUEST_TIMEOUT</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>RU_DESCRIPTOR</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create detector datalink handlers. </p>

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00098">98</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  106</span>        ) -&gt; tuple[list, list]:</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">if</span> self.dlh_plugin <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  109</span>            <span class="keywordflow">raise</span> NotImplementedError(<span class="stringliteral">&quot;DataLinkHandler plugin must be specified in derived classses!&quot;</span>)</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>        cfg = self.ro_cfg</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>        <span class="comment"># defaults hardcoded values</span></div>
<div class="line"><span class="lineno">  114</span>        default_latency_buffer_alignment_size = 4096</div>
<div class="line"><span class="lineno">  115</span>        default_pop_limit_pct = 0.8</div>
<div class="line"><span class="lineno">  116</span>        default_pop_size_pct = 0.1</div>
<div class="line"><span class="lineno">  117</span>        default_stream_buffer_size = 8388608</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>        modules = []</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">for</span> stream <span class="keywordflow">in</span> RU_DESCRIPTOR.streams:</div>
<div class="line"><span class="lineno">  122</span>            geo_id = stream.geo_id</div>
<div class="line"><span class="lineno">  123</span>            modules += [DAQModule(</div>
<div class="line"><span class="lineno">  124</span>                        name = f<span class="stringliteral">&quot;datahandler_{stream.src_id}&quot;</span>,</div>
<div class="line"><span class="lineno">  125</span>                        plugin = self.dlh_plugin, </div>
<div class="line"><span class="lineno">  126</span>                        conf = rconf.Conf(</div>
<div class="line"><span class="lineno">  127</span>                            readoutmodelconf= rconf.ReadoutModelConf(</div>
<div class="line"><span class="lineno">  128</span>                                source_queue_timeout_ms = cfg.source_queue_timeout_ms,</div>
<div class="line"><span class="lineno">  129</span>                                source_queue_sleep_us = cfg.source_queue_sleep_us,</div>
<div class="line"><span class="lineno">  130</span>                                <span class="comment"># fake_trigger_flag=0, # default</span></div>
<div class="line"><span class="lineno">  131</span>                                source_id =  stream.src_id,</div>
<div class="line"><span class="lineno">  132</span>                                send_partial_fragment_if_available = SEND_PARTIAL_FRAGMENTS</div>
<div class="line"><span class="lineno">  133</span>                            ),</div>
<div class="line"><span class="lineno">  134</span>                            latencybufferconf= rconf.LatencyBufferConf(</div>
<div class="line"><span class="lineno">  135</span>                                latency_buffer_alignment_size = default_latency_buffer_alignment_size,</div>
<div class="line"><span class="lineno">  136</span>                                latency_buffer_size = cfg.latency_buffer_size,</div>
<div class="line"><span class="lineno">  137</span>                                latency_buffer_numa_aware = LATENCY_BUFFER_NUMA_AWARE,</div>
<div class="line"><span class="lineno">  138</span>                                latency_buffer_numa_node = NUMA_ID,</div>
<div class="line"><span class="lineno">  139</span>                                latency_buffer_preallocation = LATENCY_BUFFER_ALLOCATION_MODE,</div>
<div class="line"><span class="lineno">  140</span>                                latency_buffer_intrinsic_allocator = LATENCY_BUFFER_ALLOCATION_MODE,</div>
<div class="line"><span class="lineno">  141</span>                            ),</div>
<div class="line"><span class="lineno">  142</span>                            rawdataprocessorconf= rconf.RawDataProcessorConf(</div>
<div class="line"><span class="lineno">  143</span>                                emulator_mode = cfg.emulator_mode,</div>
<div class="line"><span class="lineno">  144</span>                                source_id =  stream.src_id,</div>
<div class="line"><span class="lineno">  145</span>                                crate_id = geo_id.crate_id, </div>
<div class="line"><span class="lineno">  146</span>                                slot_id = geo_id.slot_id, </div>
<div class="line"><span class="lineno">  147</span>                                link_id = geo_id.stream_id</div>
<div class="line"><span class="lineno">  148</span>                            ),</div>
<div class="line"><span class="lineno">  149</span>                            requesthandlerconf= rconf.RequestHandlerConf(</div>
<div class="line"><span class="lineno">  150</span>                                latency_buffer_size = cfg.latency_buffer_size,</div>
<div class="line"><span class="lineno">  151</span>                                pop_limit_pct = default_pop_limit_pct,</div>
<div class="line"><span class="lineno">  152</span>                                pop_size_pct = default_pop_size_pct,</div>
<div class="line"><span class="lineno">  153</span>                                source_id = stream.src_id,</div>
<div class="line"><span class="lineno">  154</span>                                det_id = RU_DESCRIPTOR.det_id,</div>
<div class="line"><span class="lineno">  155</span>                                output_file = path.join(cfg.raw_recording_output_dir, f<span class="stringliteral">&quot;output_{RU_DESCRIPTOR.label}_{stream.src_id}.out&quot;</span>),</div>
<div class="line"><span class="lineno">  156</span>                                stream_buffer_size = default_stream_buffer_size,</div>
<div class="line"><span class="lineno">  157</span>                                request_timeout_ms = DATA_REQUEST_TIMEOUT,</div>
<div class="line"><span class="lineno">  158</span>                                fragment_send_timeout_ms = cfg.fragment_send_timeout_ms,</div>
<div class="line"><span class="lineno">  159</span>                                enable_raw_recording = cfg.enable_raw_recording,</div>
<div class="line"><span class="lineno">  160</span>                            ))</div>
<div class="line"><span class="lineno">  161</span>                    )]</div>
<div class="line"><span class="lineno">  162</span>        queues = []</div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">return</span> modules, queues</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8392fd073c7360c6caf83deff84b84cc" name="a8392fd073c7360c6caf83deff84b84cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8392fd073c7360c6caf83deff84b84cc">&#9670;&#160;</a></span>create_fake_readout_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> <a class="el" href="classdaqconf_1_1core_1_1app_1_1App.html">App</a> daqconf.apps.readout_gen.ReadoutAppGenerator.create_fake_readout_app </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>RU_DESCRIPTOR</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>CLOCK_SPEED_HZ</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create Fake dataproducers Application. </p>
<pre class="fragment"></pre> 
<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00496">496</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  500</span>    ) -&gt; App:</div>
<div class="line"><span class="lineno">  501</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  502</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  503</span>        modules = []</div>
<div class="line"><span class="lineno">  504</span>        queues = []</div>
<div class="line"><span class="lineno">  505</span>        </div>
<div class="line"><span class="lineno">  506</span>        <span class="comment"># _, _, fakedata_fragment_type, fakedata_time_tick, fakedata_frame_size = compute_data_types(RU_DESCRIPTOR.det_id, CLOCK_SPEED_HZ, RU_DESCRIPTOR.kind)</span></div>
<div class="line"><span class="lineno">  507</span>        </div>
<div class="line"><span class="lineno">  508</span>        <span class="keywordflow">for</span> stream <span class="keywordflow">in</span> RU_DESCRIPTOR.streams:</div>
<div class="line"><span class="lineno">  509</span>            _, _, fakedata_fragment_type, fakedata_time_tick, fakedata_frame_size = self.compute_data_types(stream)</div>
<div class="line"><span class="lineno">  510</span>        </div>
<div class="line"><span class="lineno">  511</span>            modules += [DAQModule(name = f<span class="stringliteral">&quot;fakedataprod_{stream.src_id}&quot;</span>,</div>
<div class="line"><span class="lineno">  512</span>                                  plugin=<span class="stringliteral">&#39;FakeDataProd&#39;</span>,</div>
<div class="line"><span class="lineno">  513</span>                                  conf = fdp.ConfParams(</div>
<div class="line"><span class="lineno">  514</span>                                      system_type = <span class="stringliteral">&quot;Detector_Readout&quot;</span>,</div>
<div class="line"><span class="lineno">  515</span>                                      source_id = stream.src_id,</div>
<div class="line"><span class="lineno">  516</span>                                      time_tick_diff = fakedata_time_tick,</div>
<div class="line"><span class="lineno">  517</span>                                      frame_size = fakedata_frame_size,</div>
<div class="line"><span class="lineno">  518</span>                                      response_delay = 0,</div>
<div class="line"><span class="lineno">  519</span>                                      fragment_type = fakedata_fragment_type,</div>
<div class="line"><span class="lineno">  520</span>                                  ))]</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>        mgraph = ModuleGraph(modules, queues=queues)</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>        <span class="keywordflow">for</span> stream <span class="keywordflow">in</span> RU_DESCRIPTOR.streams:</div>
<div class="line"><span class="lineno">  525</span>            <span class="comment"># Add fragment producers for fake data. This call is necessary to create the RequestReceiver instance, but we don&#39;t need the generated FragmentSender or its queues...</span></div>
<div class="line"><span class="lineno">  526</span>            mgraph.add_fragment_producer(id = stream.src_id, subsystem = <span class="stringliteral">&quot;Detector_Readout&quot;</span>,</div>
<div class="line"><span class="lineno">  527</span>                                         requests_in   = f<span class="stringliteral">&quot;fakedataprod_{stream.src_id}.data_request_input_queue&quot;</span>,</div>
<div class="line"><span class="lineno">  528</span>                                         fragments_out = f<span class="stringliteral">&quot;fakedataprod_{stream.src_id}.fragment_queue&quot;</span>)</div>
<div class="line"><span class="lineno">  529</span>            mgraph.add_endpoint(f<span class="stringliteral">&quot;timesync_ru{RU_DESCRIPTOR.label}_{stream.src_id}&quot;</span>, f<span class="stringliteral">&quot;fakedataprod_{stream.src_id}.timesync_output&quot;</span>,    <span class="stringliteral">&quot;TimeSync&quot;</span>,   Direction.OUT, is_pubsub=<span class="keyword">True</span>, toposort=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  530</span>            </div>
<div class="line"><span class="lineno">  531</span>        <span class="comment"># Create the application</span></div>
<div class="line"><span class="lineno">  532</span>        readout_app = App(mgraph, host=RU_DESCRIPTOR.host_name)</div>
<div class="line"><span class="lineno">  533</span>        </div>
<div class="line"><span class="lineno">  534</span>        <span class="comment"># All done</span></div>
<div class="line"><span class="lineno">  535</span>        <span class="keywordflow">return</span> readout_app</div>
<div class="line"><span class="lineno">  536</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="acb4d0b3d8d3ded6ef80c369cc25363d8" name="acb4d0b3d8d3ded6ef80c369cc25363d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb4d0b3d8d3ded6ef80c369cc25363d8">&#9670;&#160;</a></span>create_tp_dlhs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> tuple[list, list] daqconf.apps.readout_gen.ReadoutAppGenerator.create_tp_dlhs </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list</td>          <td class="paramname"><span class="paramname"><em>dlh_list</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>DATA_REQUEST_TIMEOUT</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>FRAGMENT_SEND_TIMEOUT</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>tpset_sid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create TP data link handlers. </p>

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00224">224</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  230</span>        )-&gt; tuple[list, list]:</div>
<div class="line"><span class="lineno">  231</span>        </div>
<div class="line"><span class="lineno">  232</span>        default_pop_limit_pct = 0.8</div>
<div class="line"><span class="lineno">  233</span>        default_pop_size_pct = 0.1</div>
<div class="line"><span class="lineno">  234</span>        default_stream_buffer_size = 8388608</div>
<div class="line"><span class="lineno">  235</span>        default_latency_buffer_size = 4000000</div>
<div class="line"><span class="lineno">  236</span>        default_detid = 1</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>        <span class="keywordflow">if</span> self.dlh_plugin <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  239</span>            <span class="keywordflow">raise</span> NotImplementedError(<span class="stringliteral">&quot;DataLinkHandler plugin must be specified in derived classses!&quot;</span>)</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>        <span class="comment"># Create the TP link handler</span></div>
<div class="line"><span class="lineno">  242</span>        modules = [</div>
<div class="line"><span class="lineno">  243</span>        DAQModule(name = f<span class="stringliteral">&quot;tp_datahandler_{tpset_sid}&quot;</span>,</div>
<div class="line"><span class="lineno">  244</span>                    plugin = self.dlh_plugin,</div>
<div class="line"><span class="lineno">  245</span>                    conf = rconf.Conf(</div>
<div class="line"><span class="lineno">  246</span>                                readoutmodelconf = rconf.ReadoutModelConf(</div>
<div class="line"><span class="lineno">  247</span>                                    source_queue_timeout_ms = QUEUE_POP_WAIT_MS,</div>
<div class="line"><span class="lineno">  248</span>                                    tpset_min_latency_ticks = self.ro_cfg.tpset_min_latency_ticks,</div>
<div class="line"><span class="lineno">  249</span>                                    source_id = tpset_sid</div>
<div class="line"><span class="lineno">  250</span>                                ),</div>
<div class="line"><span class="lineno">  251</span>                                latencybufferconf = rconf.LatencyBufferConf(</div>
<div class="line"><span class="lineno">  252</span>                                    latency_buffer_size = default_latency_buffer_size</div>
<div class="line"><span class="lineno">  253</span>                                ),</div>
<div class="line"><span class="lineno">  254</span>                                rawdataprocessorconf = rconf.RawDataProcessorConf(enable_tpg = <span class="keyword">False</span>),</div>
<div class="line"><span class="lineno">  255</span>                                requesthandlerconf= rconf.RequestHandlerConf(</div>
<div class="line"><span class="lineno">  256</span>                                    latency_buffer_size = default_latency_buffer_size,</div>
<div class="line"><span class="lineno">  257</span>                                    pop_limit_pct = default_pop_limit_pct,</div>
<div class="line"><span class="lineno">  258</span>                                    pop_size_pct = default_pop_size_pct,</div>
<div class="line"><span class="lineno">  259</span>                                    source_id = tpset_sid,</div>
<div class="line"><span class="lineno">  260</span>                                    det_id = default_detid,</div>
<div class="line"><span class="lineno">  261</span>                                    stream_buffer_size = default_stream_buffer_size,</div>
<div class="line"><span class="lineno">  262</span>                                    request_timeout_ms = DATA_REQUEST_TIMEOUT,</div>
<div class="line"><span class="lineno">  263</span>                                    fragment_send_timeout_ms = FRAGMENT_SEND_TIMEOUT,</div>
<div class="line"><span class="lineno">  264</span>                                    enable_raw_recording = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  265</span>                                )</div>
<div class="line"><span class="lineno">  266</span>                            )</div>
<div class="line"><span class="lineno">  267</span>                    )</div>
<div class="line"><span class="lineno">  268</span>                ]</div>
<div class="line"><span class="lineno">  269</span>        </div>
<div class="line"><span class="lineno">  270</span>        queues = []</div>
<div class="line"><span class="lineno">  271</span>        <span class="keywordflow">for</span> dlh <span class="keywordflow">in</span> dlh_list:</div>
<div class="line"><span class="lineno">  272</span>            <span class="comment"># Attach to the detector DLH&#39;s tp_out connector</span></div>
<div class="line"><span class="lineno">  273</span>            queues += [</div>
<div class="line"><span class="lineno">  274</span>                Queue(</div>
<div class="line"><span class="lineno">  275</span>                    f<span class="stringliteral">&quot;{dlh.name}.tp_out&quot;</span>,</div>
<div class="line"><span class="lineno">  276</span>                    f<span class="stringliteral">&quot;tp_datahandler_{tpset_sid}.raw_input&quot;</span>,</div>
<div class="line"><span class="lineno">  277</span>                    <span class="stringliteral">&quot;TriggerPrimitive&quot;</span>,</div>
<div class="line"><span class="lineno">  278</span>                    f<span class="stringliteral">&quot;tp_link_{tpset_sid}&quot;</span>,1000000 </div>
<div class="line"><span class="lineno">  279</span>                    )</div>
<div class="line"><span class="lineno">  280</span>                ]</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>        <span class="keywordflow">return</span> modules, queues</div>
<div class="line"><span class="lineno">  283</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aac22962b23b939688c02691e9b242c7e" name="aac22962b23b939688c02691e9b242c7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac22962b23b939688c02691e9b242c7e">&#9670;&#160;</a></span>generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.generate </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>RU_DESCRIPTOR</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>SOURCEID_BROKER</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>data_file_map</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>data_timeout_requests</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Generate the readout applicaton

Args:
    RU_DESCRIPTOR (ReadoutUnitDescriptor): A readout unit descriptor object
    SOURCEID_BROKER (SourceIDBroker): The source ID brocker
    data_file_map (dict): Map of pattern files to application
    data_timeout_requests (int): Data timeout request

Raises:
    RuntimeError: _description_

Returns:
    _type_: _description_
</pre> 
<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00384">384</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  390</span>            ):</div>
<div class="line"><span class="lineno">  391</span>        <span class="stringliteral">&quot;&quot;&quot;Generate the readout applicaton</span></div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral">            RU_DESCRIPTOR (ReadoutUnitDescriptor): A readout unit descriptor object</span></div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">            SOURCEID_BROKER (SourceIDBroker): The source ID brocker</span></div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">            data_file_map (dict): Map of pattern files to application</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">            data_timeout_requests (int): Data timeout request</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral">        Raises:</span></div>
<div class="line"><span class="lineno">  400</span><span class="stringliteral">            RuntimeError: _description_</span></div>
<div class="line"><span class="lineno">  401</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral">        Returns:</span></div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral">            _type_: _description_</span></div>
<div class="line"><span class="lineno">  404</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  405</span>        numa_id, latency_numa, latency_preallocate = self.get_numa_cfg(RU_DESCRIPTOR)</div>
<div class="line"><span class="lineno">  406</span>        cfg = self.ro_cfg</div>
<div class="line"><span class="lineno">  407</span>        TPG_ENABLED = cfg.enable_tpg <span class="keywordflow">and</span> RU_DESCRIPTOR.kind == <span class="stringliteral">&quot;eth&quot;</span></div>
<div class="line"><span class="lineno">  408</span>        DATA_REQUEST_TIMEOUT=data_timeout_requests</div>
<div class="line"><span class="lineno">  409</span>        </div>
<div class="line"><span class="lineno">  410</span>        modules = []</div>
<div class="line"><span class="lineno">  411</span>        queues = []</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>        <span class="comment"># Create the card readers</span></div>
<div class="line"><span class="lineno">  415</span>        cr_mods = []</div>
<div class="line"><span class="lineno">  416</span>        cr_queues = []</div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>        cr_mods, cr_queues = self.create_cardreader(</div>
<div class="line"><span class="lineno">  419</span>            RU_DESCRIPTOR=RU_DESCRIPTOR,</div>
<div class="line"><span class="lineno">  420</span>            data_file_map=data_file_map</div>
<div class="line"><span class="lineno">  421</span>        )</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>        modules += cr_mods</div>
<div class="line"><span class="lineno">  424</span>        queues += cr_queues</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>        <span class="comment"># Create the data-link handlers</span></div>
<div class="line"><span class="lineno">  427</span>        dlhs_mods, _ = self.create_det_dhl(</div>
<div class="line"><span class="lineno">  428</span>            LATENCY_BUFFER_NUMA_AWARE=latency_numa,</div>
<div class="line"><span class="lineno">  429</span>            LATENCY_BUFFER_ALLOCATION_MODE=latency_preallocate,</div>
<div class="line"><span class="lineno">  430</span>            NUMA_ID=numa_id,</div>
<div class="line"><span class="lineno">  431</span>            SEND_PARTIAL_FRAGMENTS=cfg.send_partial_fragments,</div>
<div class="line"><span class="lineno">  432</span>            DATA_REQUEST_TIMEOUT=DATA_REQUEST_TIMEOUT,</div>
<div class="line"><span class="lineno">  433</span>            RU_DESCRIPTOR=RU_DESCRIPTOR</div>
<div class="line"><span class="lineno">  434</span>        )</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>        <span class="comment"># Configure the TP processing if requrested</span></div>
<div class="line"><span class="lineno">  437</span>        <span class="keywordflow">if</span> TPG_ENABLED:</div>
<div class="line"><span class="lineno">  438</span>            dlhs_mods = self.add_tp_processing(</div>
<div class="line"><span class="lineno">  439</span>            dlh_list=dlhs_mods,</div>
<div class="line"><span class="lineno">  440</span>            TPG_CHANNEL_MAP=self.det_cfg.tpc_channel_map,</div>
<div class="line"><span class="lineno">  441</span>            )</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>        modules += dlhs_mods</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>        <span class="comment"># Add the TP datalink handlers</span></div>
<div class="line"><span class="lineno">  446</span>        <span class="keywordflow">if</span> TPG_ENABLED:</div>
<div class="line"><span class="lineno">  447</span>            tps = { k:v <span class="keywordflow">for</span> k,v <span class="keywordflow">in</span> SOURCEID_BROKER.get_all_source_ids(<span class="stringliteral">&quot;Trigger&quot;</span>).items() <span class="keywordflow">if</span> isinstance(v, ReadoutUnitDescriptor ) <span class="keywordflow">and</span> v==RU_DESCRIPTOR}</div>
<div class="line"><span class="lineno">  448</span>            <span class="keywordflow">if</span> len(tps) != 1:</div>
<div class="line"><span class="lineno">  449</span>                <span class="keywordflow">raise</span> RuntimeError(f<span class="stringliteral">&quot;Could not retrieve unique element from source id map {tps}&quot;</span>)</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>            tpg_mods, tpg_queues = self.create_tp_dlhs(</div>
<div class="line"><span class="lineno">  452</span>                dlh_list=dlhs_mods,</div>
<div class="line"><span class="lineno">  453</span>                DATA_REQUEST_TIMEOUT=DATA_REQUEST_TIMEOUT,</div>
<div class="line"><span class="lineno">  454</span>                FRAGMENT_SEND_TIMEOUT=cfg.fragment_send_timeout_ms,</div>
<div class="line"><span class="lineno">  455</span>                tpset_sid = next(iter(tps))</div>
<div class="line"><span class="lineno">  456</span>            )</div>
<div class="line"><span class="lineno">  457</span>            modules += tpg_mods</div>
<div class="line"><span class="lineno">  458</span>            queues += tpg_queues</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>        <span class="comment"># Create the Module graphs</span></div>
<div class="line"><span class="lineno">  461</span>        mgraph = ModuleGraph(modules, queues=queues)</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>        <span class="comment"># Add endpoints and frame producers to DRO data handlers</span></div>
<div class="line"><span class="lineno">  464</span>        self.add_dro_eps_and_fps(</div>
<div class="line"><span class="lineno">  465</span>            mgraph=mgraph,</div>
<div class="line"><span class="lineno">  466</span>            dlh_list=dlhs_mods,</div>
<div class="line"><span class="lineno">  467</span>            RUIDX=RU_DESCRIPTOR.label</div>
<div class="line"><span class="lineno">  468</span>        )</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">if</span> TPG_ENABLED:</div>
<div class="line"><span class="lineno">  471</span>            <span class="comment"># Add endpoints and frame producers to TP data handlers</span></div>
<div class="line"><span class="lineno">  472</span>            self.add_tpg_eps_and_fps(</div>
<div class="line"><span class="lineno">  473</span>                mgraph=mgraph,</div>
<div class="line"><span class="lineno">  474</span>                tpg_dlh_list=tpg_mods,</div>
<div class="line"><span class="lineno">  475</span>                RUIDX=RU_DESCRIPTOR.label</div>
<div class="line"><span class="lineno">  476</span>            )</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>        <span class="comment"># Create the application</span></div>
<div class="line"><span class="lineno">  479</span>        readout_app = App(mgraph, host=RU_DESCRIPTOR.host_name)</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>        <span class="comment"># add patter datapaths</span></div>
<div class="line"><span class="lineno">  482</span>        self.add_data_volumes(readout_app, data_file_map)</div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>        <span class="comment"># add other datapaths</span></div>
<div class="line"><span class="lineno">  486</span>        self.add_volumes_resources(readout_app, RU_DESCRIPTOR)</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>        <span class="comment"># All done</span></div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordflow">return</span> readout_app</div>
<div class="line"><span class="lineno">  492</span>    </div>
</div><!-- fragment -->
</div>
</div>
<a id="a75bedd4dd37be9ceb7efc9cebe74a81c" name="a75bedd4dd37be9ceb7efc9cebe74a81c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75bedd4dd37be9ceb7efc9cebe74a81c">&#9670;&#160;</a></span>get_lcore_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.get_lcore_config </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>RU_DESCRIPTOR</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00069">69</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>    <span class="keyword">def </span>get_lcore_config(self, RU_DESCRIPTOR):</div>
<div class="line"><span class="lineno">   70</span>        cfg = self.ro_cfg</div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   72</span>            ex = self.lcores_excpt[(RU_DESCRIPTOR.host_name, RU_DESCRIPTOR.iface)]</div>
<div class="line"><span class="lineno">   73</span>            lcore_id_set = ex[<span class="stringliteral">&#39;lcore_id_set&#39;</span>]</div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno">   75</span>            lcore_id_set = cfg.dpdk_lcores_config[<span class="stringliteral">&#39;default_lcore_id_set&#39;</span>]</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>        </div>
<div class="line"><span class="lineno">   78</span>        <span class="keywordflow">return</span> list(dict.fromkeys(lcore_id_set))</div>
<div class="line"><span class="lineno">   79</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a37c9b4d82eece5c83a9d0427f8c6bb98" name="a37c9b4d82eece5c83a9d0427f8c6bb98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37c9b4d82eece5c83a9d0427f8c6bb98">&#9670;&#160;</a></span>get_numa_cfg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.get_numa_cfg </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>RU_DESCRIPTOR</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00055">55</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   55</span>    <span class="keyword">def </span>get_numa_cfg(self, RU_DESCRIPTOR):</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>        cfg = self.ro_cfg</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   59</span>            ex = self.numa_excpt[(RU_DESCRIPTOR.host_name, RU_DESCRIPTOR.iface)]</div>
<div class="line"><span class="lineno">   60</span>            numa_id = ex[<span class="stringliteral">&#39;numa_id&#39;</span>]</div>
<div class="line"><span class="lineno">   61</span>            latency_numa = ex[<span class="stringliteral">&#39;latency_buffer_numa_aware&#39;</span>]</div>
<div class="line"><span class="lineno">   62</span>            latency_preallocate = ex[<span class="stringliteral">&#39;latency_buffer_preallocation&#39;</span>]</div>
<div class="line"><span class="lineno">   63</span>        <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno">   64</span>            numa_id = cfg.numa_config[<span class="stringliteral">&#39;default_id&#39;</span>]</div>
<div class="line"><span class="lineno">   65</span>            latency_numa = cfg.numa_config[<span class="stringliteral">&#39;default_latency_numa_aware&#39;</span>]</div>
<div class="line"><span class="lineno">   66</span>            latency_preallocate = cfg.numa_config[<span class="stringliteral">&#39;default_latency_preallocation&#39;</span>]</div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">return</span> (numa_id, latency_numa, latency_preallocate)</div>
<div class="line"><span class="lineno">   68</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="abb74a5b639bbf37f36c53bb6ac4c3ba5" name="abb74a5b639bbf37f36c53bb6ac4c3ba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb74a5b639bbf37f36c53bb6ac4c3ba5">&#9670;&#160;</a></span>daq_cfg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.daq_cfg</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00043">43</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>

</div>
</div>
<a id="aace151c112abed5b85d1e290c2feabb0" name="aace151c112abed5b85d1e290c2feabb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aace151c112abed5b85d1e290c2feabb0">&#9670;&#160;</a></span>det_cfg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.det_cfg</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00042">42</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>

</div>
</div>
<a id="a25c3f18b95d2318496d301fbf80a6909" name="a25c3f18b95d2318496d301fbf80a6909"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25c3f18b95d2318496d301fbf80a6909">&#9670;&#160;</a></span>dlh_plugin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.dlh_plugin = None</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00036">36</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>

</div>
</div>
<a id="abb40b63149d1eea454f63d26d4540535" name="abb40b63149d1eea454f63d26d4540535"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb40b63149d1eea454f63d26d4540535">&#9670;&#160;</a></span>lcores_excpt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.lcores_excpt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00053">53</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>

</div>
</div>
<a id="abc4f80add0223e76a88ad8b94088323c" name="abc4f80add0223e76a88ad8b94088323c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc4f80add0223e76a88ad8b94088323c">&#9670;&#160;</a></span>numa_excpt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.numa_excpt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00048">48</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>

</div>
</div>
<a id="a98ffb37a26cccb73927aad56eee4019d" name="a98ffb37a26cccb73927aad56eee4019d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98ffb37a26cccb73927aad56eee4019d">&#9670;&#160;</a></span>numa_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int daqconf.apps.readout_gen.ReadoutAppGenerator.numa_id = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00037">37</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>

</div>
</div>
<a id="ae19e50560405b2db6925d3f194779e14" name="ae19e50560405b2db6925d3f194779e14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19e50560405b2db6925d3f194779e14">&#9670;&#160;</a></span>ro_cfg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.apps.readout_gen.ReadoutAppGenerator.ro_cfg</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readout__gen_8py_source.html#l00041">41</a> of file <a class="el" href="readout__gen_8py_source.html">readout_gen.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>sourcecode/daqconf/python/daqconf/apps/<a class="el" href="readout__gen_8py_source.html">readout_gen.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
