<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DUNE-DAQ: daqconf.core.fragment_producers Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DUNE-DAQ
   </div>
   <div id="projectbrief">DUNE Trigger and Data Acquisition software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedaqconf.html">daqconf</a></li><li class="navelem"><a class="el" href="namespacedaqconf_1_1core.html">core</a></li><li class="navelem"><a class="el" href="namespacedaqconf_1_1core_1_1fragment__producers.html">fragment_producers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">daqconf.core.fragment_producers Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a32e5ad372fe2921e72a349a4dae87899" id="r_a32e5ad372fe2921e72a349a4dae87899"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32e5ad372fe2921e72a349a4dae87899">set_mlt_links</a> (the_system, tp_infos, mlt_app_name=&quot;trigger&quot;, verbose=False)</td></tr>
<tr class="separator:a32e5ad372fe2921e72a349a4dae87899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ded0d5191011c6ad65472c9ed8cb650" id="r_a6ded0d5191011c6ad65472c9ed8cb650"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ded0d5191011c6ad65472c9ed8cb650">remove_mlt_link</a> (the_system, source_id, mlt_app_name=&quot;trigger&quot;)</td></tr>
<tr class="separator:a6ded0d5191011c6ad65472c9ed8cb650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01ad67a9b4fe7a09310616368ff5458f" id="r_a01ad67a9b4fe7a09310616368ff5458f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a01ad67a9b4fe7a09310616368ff5458f">create_direct_producer_connections</a> (app_name, the_system, verbose=False)</td></tr>
<tr class="separator:a01ad67a9b4fe7a09310616368ff5458f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54894c3c879116879072a4f4ad5719f9" id="r_a54894c3c879116879072a4f4ad5719f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a54894c3c879116879072a4f4ad5719f9">create_producer_connections_with_aggregation</a> (app_name, the_system, verbose=False)</td></tr>
<tr class="separator:a54894c3c879116879072a4f4ad5719f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6535fdb860b64babeeee2ad07290174" id="r_ab6535fdb860b64babeeee2ad07290174"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab6535fdb860b64babeeee2ad07290174">connect_fragment_producers</a> (app_name, the_system, verbose=False)</td></tr>
<tr class="separator:ab6535fdb860b64babeeee2ad07290174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a193efc938729a9499ec31151336d5965" id="r_a193efc938729a9499ec31151336d5965"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a193efc938729a9499ec31151336d5965">connect_all_fragment_producers</a> (the_system, dataflow_name=&quot;dataflow&quot;, verbose=False)</td></tr>
<tr class="separator:a193efc938729a9499ec31151336d5965"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1d58c7f973e0c848395a9fe1f5ceae3d" id="r_a1d58c7f973e0c848395a9fe1f5ceae3d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d58c7f973e0c848395a9fe1f5ceae3d">default_load_path</a></td></tr>
<tr class="separator:a1d58c7f973e0c848395a9fe1f5ceae3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a193efc938729a9499ec31151336d5965" name="a193efc938729a9499ec31151336d5965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a193efc938729a9499ec31151336d5965">&#9670;&#160;</a></span>connect_all_fragment_producers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.core.fragment_producers.connect_all_fragment_producers </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>the_system</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>dataflow_name</em><span class="paramdefsep"> = </span><span class="paramdefval">&quot;dataflow&quot;</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>verbose</em><span class="paramdefsep"> = </span><span class="paramdefval">False</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Connect all fragment producers in the system to the appropriate
queues in the dataflow app.
</pre> 
<p class="definition">Definition at line <a class="el" href="fragment__producers_8py_source.html#l00234">234</a> of file <a class="el" href="fragment__producers_8py_source.html">fragment_producers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  234</span><span class="keyword">def </span>connect_all_fragment_producers(the_system, dataflow_name=&quot;dataflow&quot;, verbose=False):</div>
<div class="line"><span class="lineno">  235</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">    Connect all fragment producers in the system to the appropriate</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">    queues in the dataflow app.</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">for</span> name, app <span class="keywordflow">in</span> the_system.apps.items():</div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordflow">if</span> name==dataflow_name:</div>
<div class="line"><span class="lineno">  241</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  242</span>        connect_fragment_producers(name, the_system, verbose)</div>
<div class="line"><span class="lineno">  243</span>        </div>
<div class="line"><span class="lineno">  244</span>    trb_apps = [ (name,app) <span class="keywordflow">for</span> (name,app) <span class="keywordflow">in</span> the_system.apps.items() <span class="keywordflow">if</span> <span class="stringliteral">&quot;TriggerRecordBuilder&quot;</span> <span class="keywordflow">in</span> [n.plugin <span class="keywordflow">for</span> n <span class="keywordflow">in</span> app.modulegraph.module_list()] ]</div>
<div class="line"><span class="lineno">  245</span>    </div>
<div class="line"><span class="lineno">  246</span>    <span class="keywordflow">for</span> trb_app_name, trb_app_conf <span class="keywordflow">in</span> trb_apps:</div>
<div class="line"><span class="lineno">  247</span>        fragment_connection_name = f<span class="stringliteral">&quot;fragments_to_{trb_app_name}&quot;</span></div>
<div class="line"><span class="lineno">  248</span>        df_mgraph = trb_app_conf.modulegraph</div>
<div class="line"><span class="lineno">  249</span>        trb_module_name = [n.name <span class="keywordflow">for</span> n <span class="keywordflow">in</span> df_mgraph.module_list() <span class="keywordflow">if</span> n.plugin == <span class="stringliteral">&quot;TriggerRecordBuilder&quot;</span>][0]</div>
<div class="line"><span class="lineno">  250</span>        df_mgraph.add_endpoint(fragment_connection_name, f<span class="stringliteral">&quot;{trb_module_name}.data_fragment_all&quot;</span>, <span class="stringliteral">&quot;Fragment&quot;</span>, Direction.IN, toposort=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>        <span class="comment"># Add the new source_id-to-connections map to the</span></div>
<div class="line"><span class="lineno">  253</span>        <span class="comment"># TriggerRecordBuilder.</span></div>
<div class="line"><span class="lineno">  254</span>        old_trb_conf = df_mgraph.get_module(trb_module_name).conf</div>
<div class="line"><span class="lineno">  255</span>        df_mgraph.reset_module_conf(trb_module_name, trb.ConfParams(general_queue_timeout=old_trb_conf.general_queue_timeout,</div>
<div class="line"><span class="lineno">  256</span>                                                               source_id = old_trb_conf.source_id,</div>
<div class="line"><span class="lineno">  257</span>                                                          max_time_window = old_trb_conf.max_time_window,</div>
<div class="line"><span class="lineno">  258</span>                                                          trigger_record_timeout_ms = old_trb_conf.trigger_record_timeout_ms))</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6535fdb860b64babeeee2ad07290174" name="ab6535fdb860b64babeeee2ad07290174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6535fdb860b64babeeee2ad07290174">&#9670;&#160;</a></span>connect_fragment_producers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.core.fragment_producers.connect_fragment_producers </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>app_name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>the_system</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>verbose</em><span class="paramdefsep"> = </span><span class="paramdefval">False</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Connect the data request and fragment sending queues from all of
   the fragment producers in the app with name `app_name` to the
   appropriate endpoints of the dataflow app.</pre> 
<p class="definition">Definition at line <a class="el" href="fragment__producers_8py_source.html#l00211">211</a> of file <a class="el" href="fragment__producers_8py_source.html">fragment_producers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  211</span><span class="keyword">def </span>connect_fragment_producers(app_name, the_system, verbose=False):</div>
<div class="line"><span class="lineno">  212</span>    <span class="stringliteral">&quot;&quot;&quot;Connect the data request and fragment sending queues from all of</span></div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">       the fragment producers in the app with name `app_name` to the</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">       appropriate endpoints of the dataflow app.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>    app = the_system.apps[app_name]</div>
<div class="line"><span class="lineno">  217</span>    producers = app.modulegraph.fragment_producers</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>    <span class="comment"># Nothing to do if there are no fragment producers. Return now so we don&#39;t create unneeded modules or connections</span></div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">if</span> len(producers) == 0:</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>    dro_producer = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">for</span> producer <span class="keywordflow">in</span> producers.values():</div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">if</span> producer.source_id.subsystem == SourceID.Subsystem.kDetectorReadout:</div>
<div class="line"><span class="lineno">  226</span>            dro_producer = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">if</span> dro_producer:</div>
<div class="line"><span class="lineno">  229</span>        create_producer_connections_with_aggregation(app_name, the_system, verbose)</div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  231</span>        create_direct_producer_connections(app_name, the_system, verbose)</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a01ad67a9b4fe7a09310616368ff5458f" name="a01ad67a9b4fe7a09310616368ff5458f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01ad67a9b4fe7a09310616368ff5458f">&#9670;&#160;</a></span>create_direct_producer_connections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.core.fragment_producers.create_direct_producer_connections </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>app_name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>the_system</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>verbose</em><span class="paramdefsep"> = </span><span class="paramdefval">False</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fragment__producers_8py_source.html#l00142">142</a> of file <a class="el" href="fragment__producers_8py_source.html">fragment_producers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  142</span><span class="keyword">def </span>create_direct_producer_connections(app_name, the_system, verbose=False):</div>
<div class="line"><span class="lineno">  143</span>    app = the_system.apps[app_name]</div>
<div class="line"><span class="lineno">  144</span>    producers = app.modulegraph.fragment_producers</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">if</span> len(producers) == 0:</div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">  148</span>        console.log(f<span class="stringliteral">&quot;Connecting fragment producers in {app_name} directly to TRBs&quot;</span>)</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">for</span> producer <span class="keywordflow">in</span> producers.values():</div>
<div class="line"><span class="lineno">  151</span>        queue_inst = f<span class="stringliteral">&quot;data_requests_for_{source_id_raw_str(producer.source_id)}&quot;</span></div>
<div class="line"><span class="lineno">  152</span>        <span class="comment"># Connect request receiver to TRB output in DF app</span></div>
<div class="line"><span class="lineno">  153</span>        app.modulegraph.add_endpoint(queue_inst,</div>
<div class="line"><span class="lineno">  154</span>                                 internal_name = producer.requests_in, </div>
<div class="line"><span class="lineno">  155</span>                                 data_type = <span class="stringliteral">&quot;DataRequest&quot;</span>,</div>
<div class="line"><span class="lineno">  156</span>                                 inout = Direction.IN)</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    trb_apps = [ (name,app) <span class="keywordflow">for</span> (name,app) <span class="keywordflow">in</span> the_system.apps.items() <span class="keywordflow">if</span> <span class="stringliteral">&quot;TriggerRecordBuilder&quot;</span> <span class="keywordflow">in</span> [n.plugin <span class="keywordflow">for</span> n <span class="keywordflow">in</span> app.modulegraph.module_list()] ]</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    <span class="keywordflow">for</span> trb_app_name, trb_app_conf <span class="keywordflow">in</span> trb_apps:</div>
<div class="line"><span class="lineno">  161</span>        fragment_connection_name = f<span class="stringliteral">&quot;fragments_to_{trb_app_name}&quot;</span></div>
<div class="line"><span class="lineno">  162</span>        app.modulegraph.add_endpoint(fragment_connection_name, <span class="keywordtype">None</span>, <span class="stringliteral">&quot;Fragment&quot;</span>, Direction.OUT)</div>
<div class="line"><span class="lineno">  163</span>        df_mgraph = trb_app_conf.modulegraph</div>
<div class="line"><span class="lineno">  164</span>        trb_module_name = [n.name <span class="keywordflow">for</span> n <span class="keywordflow">in</span> df_mgraph.module_list() <span class="keywordflow">if</span> n.plugin == <span class="stringliteral">&quot;TriggerRecordBuilder&quot;</span>][0]</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">for</span> producer <span class="keywordflow">in</span> producers.values():</div>
<div class="line"><span class="lineno">  166</span>            queue_inst = f<span class="stringliteral">&quot;data_requests_for_{source_id_raw_str(producer.source_id)}&quot;</span></div>
<div class="line"><span class="lineno">  167</span>            df_mgraph.add_endpoint(queue_inst, f<span class="stringliteral">&quot;{trb_module_name}.request_output_{source_id_raw_str(producer.source_id)}&quot;</span>, <span class="stringliteral">&quot;DataRequest&quot;</span>, Direction.OUT)</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a54894c3c879116879072a4f4ad5719f9" name="a54894c3c879116879072a4f4ad5719f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54894c3c879116879072a4f4ad5719f9">&#9670;&#160;</a></span>create_producer_connections_with_aggregation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.core.fragment_producers.create_producer_connections_with_aggregation </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>app_name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>the_system</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>verbose</em><span class="paramdefsep"> = </span><span class="paramdefval">False</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fragment__producers_8py_source.html#l00170">170</a> of file <a class="el" href="fragment__producers_8py_source.html">fragment_producers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  170</span><span class="keyword">def </span>create_producer_connections_with_aggregation(app_name, the_system, verbose=False):</div>
<div class="line"><span class="lineno">  171</span>    app = the_system.apps[app_name]</div>
<div class="line"><span class="lineno">  172</span>    producers = app.modulegraph.fragment_producers</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">if</span> len(producers) == 0:</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">  176</span>        console.log(f<span class="stringliteral">&quot;Connecting fragment producers in {app_name} to TRBs using a FragmentAggregator&quot;</span>)</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>    <span class="comment"># Create the fragment aggregator. </span></div>
<div class="line"><span class="lineno">  179</span>    app.modulegraph.add_module(f<span class="stringliteral">&quot;fragment_aggregator_{app_name}&quot;</span>,</div>
<div class="line"><span class="lineno">  180</span>                               plugin = <span class="stringliteral">&quot;FragmentAggregator&quot;</span>,</div>
<div class="line"><span class="lineno">  181</span>                               conf = <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="comment"># Declare the fragment aggregator endpoint that receives DataRequests</span></div>
<div class="line"><span class="lineno">  184</span>    queue_inst = f<span class="stringliteral">&quot;data_requests_for_{app_name}&quot;</span></div>
<div class="line"><span class="lineno">  185</span>    app.modulegraph.add_endpoint(queue_inst,</div>
<div class="line"><span class="lineno">  186</span>                                 internal_name = f<span class="stringliteral">&quot;fragment_aggregator_{app_name}.data_req_input&quot;</span>,</div>
<div class="line"><span class="lineno">  187</span>                                 data_type = <span class="stringliteral">&quot;DataRequest&quot;</span>,</div>
<div class="line"><span class="lineno">  188</span>                                 inout = Direction.IN)</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    <span class="comment"># Connect the DLH Fragment output queues to the fragment aggregator</span></div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordflow">for</span> producer <span class="keywordflow">in</span> producers.values():</div>
<div class="line"><span class="lineno">  192</span>        app.modulegraph.connect_modules(producer.fragments_out, f<span class="stringliteral">&quot;fragment_aggregator_{app_name}.fragment_input&quot;</span>, <span class="stringliteral">&quot;Fragment&quot;</span>, queue_name=<span class="stringliteral">&quot;fragment_queue&quot;</span>, size_hint=100000)</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    <span class="comment"># Connect the DLH DataRequest input queues to the fragment aggregator</span></div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">for</span> producer <span class="keywordflow">in</span> producers.values():</div>
<div class="line"><span class="lineno">  196</span>        app.modulegraph.connect_modules(f<span class="stringliteral">&quot;fragment_aggregator_{app_name}.request_output_{source_id_raw_str(producer.source_id)}&quot;</span>, producer.requests_in, <span class="stringliteral">&quot;DataRequest&quot;</span>, queue_name=f<span class="stringliteral">&quot;data_requests_for_{source_id_raw_str(producer.source_id)}&quot;</span>, size_hint=1000)</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    trb_apps = [ (name,app) <span class="keywordflow">for</span> (name,app) <span class="keywordflow">in</span> the_system.apps.items() <span class="keywordflow">if</span> <span class="stringliteral">&quot;TriggerRecordBuilder&quot;</span> <span class="keywordflow">in</span> [n.plugin <span class="keywordflow">for</span> n <span class="keywordflow">in</span> app.modulegraph.module_list()] ]</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    <span class="comment"># Declare the fragment aggregator endpoints that send Fragments</span></div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">for</span> trb_app_name, trb_app_conf <span class="keywordflow">in</span> trb_apps:</div>
<div class="line"><span class="lineno">  202</span>        fragment_connection_name = f<span class="stringliteral">&quot;fragments_to_{trb_app_name}&quot;</span></div>
<div class="line"><span class="lineno">  203</span>        app.modulegraph.add_endpoint(fragment_connection_name, <span class="keywordtype">None</span>, <span class="stringliteral">&quot;Fragment&quot;</span>, Direction.OUT)</div>
<div class="line"><span class="lineno">  204</span>        df_mgraph = trb_app_conf.modulegraph</div>
<div class="line"><span class="lineno">  205</span>        trb_module_name = [n.name <span class="keywordflow">for</span> n <span class="keywordflow">in</span> df_mgraph.module_list() <span class="keywordflow">if</span> n.plugin == <span class="stringliteral">&quot;TriggerRecordBuilder&quot;</span>][0]</div>
<div class="line"><span class="lineno">  206</span>        queue_inst = f<span class="stringliteral">&quot;data_requests_for_{app_name}&quot;</span></div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">for</span> producer <span class="keywordflow">in</span> producers.values():</div>
<div class="line"><span class="lineno">  208</span>            df_mgraph.add_endpoint(queue_inst, f<span class="stringliteral">&quot;{trb_module_name}.request_output_{source_id_raw_str(producer.source_id)}&quot;</span>, <span class="stringliteral">&quot;DataRequest&quot;</span>, Direction.OUT)</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ded0d5191011c6ad65472c9ed8cb650" name="a6ded0d5191011c6ad65472c9ed8cb650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ded0d5191011c6ad65472c9ed8cb650">&#9670;&#160;</a></span>remove_mlt_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.core.fragment_producers.remove_mlt_link </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>the_system</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>source_id</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>mlt_app_name</em><span class="paramdefsep"> = </span><span class="paramdefval">&quot;trigger&quot;</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove the given source_id (which should be a dict with keys "system", "region", "element") from the list of links to request data from in the MLT.
</pre> 
<p class="definition">Definition at line <a class="el" href="fragment__producers_8py_source.html#l00113">113</a> of file <a class="el" href="fragment__producers_8py_source.html">fragment_producers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  113</span><span class="keyword">def </span>remove_mlt_link(the_system, source_id, mlt_app_name=&quot;trigger&quot;):</div>
<div class="line"><span class="lineno">  114</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">    Remove the given source_id (which should be a dict with keys &quot;system&quot;, &quot;region&quot;, &quot;element&quot;) from the list of links to request data from in the MLT.</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  117</span>    mgraph = the_system.apps[mlt_app_name].modulegraph</div>
<div class="line"><span class="lineno">  118</span>    old_mlt_conf = mgraph.get_module(<span class="stringliteral">&quot;mlt&quot;</span>).conf</div>
<div class="line"><span class="lineno">  119</span>    mlt_mandatory_links = old_mlt_conf.mandatory_links</div>
<div class="line"><span class="lineno">  120</span>    mlt_groups_links = old_mlt_conf.groups_links</div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordflow">if</span> source_id <span class="keywordflow">not</span> <span class="keywordflow">in</span> mlt_mandatory_links <span class="keywordflow">and</span> source_id <span class="keywordflow">not</span> <span class="keywordflow">in</span> mlt_groups_links:</div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">raise</span> ValueError(f<span class="stringliteral">&quot;SourceID {source_id} not in MLT links list&quot;</span>)</div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">if</span> source_id <span class="keywordflow">in</span> mlt_mandatory_links:</div>
<div class="line"><span class="lineno">  124</span>        mlt_mandatory_links.remove(source_id)</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">if</span> source_id <span class="keywordflow">in</span> mlt_groups_links:</div>
<div class="line"><span class="lineno">  126</span>        mlt_groups_links.remove(source_id)</div>
<div class="line"><span class="lineno">  127</span>    mgraph.reset_module_conf(<span class="stringliteral">&quot;mlt&quot;</span>, mlt.ConfParams(mandatory_links=mlt_mandatory_links,</div>
<div class="line"><span class="lineno">  128</span>                                                   groups_links=mlt_groups_links,</div>
<div class="line"><span class="lineno">  129</span>                                                   hsi_trigger_type_passthrough=old_mlt_conf.hsi_trigger_type_passthrough,</div>
<div class="line"><span class="lineno">  130</span>                                                   merge_overlapping_tcs=old_mlt_conf.merge_overlapping_tcs,</div>
<div class="line"><span class="lineno">  131</span>                                                   buffer_timeout=old_mlt_conf.buffer_timeout,</div>
<div class="line"><span class="lineno">  132</span>                                                   td_out_of_timeout=old_mlt_conf.td_out_of_timeout,</div>
<div class="line"><span class="lineno">  133</span>                                                   td_readout_limit=old_mlt_conf.td_readout_limit,</div>
<div class="line"><span class="lineno">  134</span>                                                   ignore_tc=old_mlt_conf.ignore_tc,</div>
<div class="line"><span class="lineno">  135</span>                                                   use_readout_map=old_mlt_conf.use_readout_map,</div>
<div class="line"><span class="lineno">  136</span>                                                   td_readout_map=old_mlt_conf.td_readout_map,</div>
<div class="line"><span class="lineno">  137</span>                                                   use_roi_readout=old_mlt_conf.use_roi_readout,</div>
<div class="line"><span class="lineno">  138</span>                                                   roi_conf=old_mlt_conf.roi_conf,</div>
<div class="line"><span class="lineno">  139</span>                                                   use_bitwords=old_mlt_conf.use_bitwords,</div>
<div class="line"><span class="lineno">  140</span>                                                   trigger_bitwords=old_mlt_conf.trigger_bitwords))</div>
<div class="line"><span class="lineno">  141</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a32e5ad372fe2921e72a349a4dae87899" name="a32e5ad372fe2921e72a349a4dae87899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32e5ad372fe2921e72a349a4dae87899">&#9670;&#160;</a></span>set_mlt_links()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.core.fragment_producers.set_mlt_links </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>the_system</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tp_infos</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>mlt_app_name</em><span class="paramdefsep"> = </span><span class="paramdefval">&quot;trigger&quot;</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>verbose</em><span class="paramdefsep"> = </span><span class="paramdefval">False</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">The MLT needs to know the full list of fragment producers in the
system so it can populate the TriggerDecisions it creates. This
function gets all the fragment producers in the system and adds their
GeoIDs to the MLT's config. It assumes that the ModuleLevelTrigger
lives in an application with name `mlt_app_name` and has the name
"mlt".
</pre> 
<p class="definition">Definition at line <a class="el" href="fragment__producers_8py_source.html#l00020">20</a> of file <a class="el" href="fragment__producers_8py_source.html">fragment_producers.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   20</span><span class="keyword">def </span>set_mlt_links(the_system, tp_infos, mlt_app_name=&quot;trigger&quot;, verbose=False):</div>
<div class="line"><span class="lineno">   21</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   22</span><span class="stringliteral">    The MLT needs to know the full list of fragment producers in the</span></div>
<div class="line"><span class="lineno">   23</span><span class="stringliteral">    system so it can populate the TriggerDecisions it creates. This</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">    function gets all the fragment producers in the system and adds their</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral">    GeoIDs to the MLT&#39;s config. It assumes that the ModuleLevelTrigger</span></div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">    lives in an application with name `mlt_app_name` and has the name</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">    &quot;mlt&quot;.</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>    </div>
<div class="line"><span class="lineno">   31</span>    mlt_readout_map = {}</div>
<div class="line"><span class="lineno">   32</span>    <span class="keywordflow">for</span> trigger_sid,conf <span class="keywordflow">in</span> tp_infos.items():</div>
<div class="line"><span class="lineno">   33</span>        <span class="keywordflow">if</span> isinstance(conf, TAInfo):</div>
<div class="line"><span class="lineno">   34</span>            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> mlt_readout_map.keys():</div>
<div class="line"><span class="lineno">   35</span>                <span class="keywordflow">if</span> mlt_readout_map[key][<span class="stringliteral">&quot;group&quot;</span>] == conf.region_id:</div>
<div class="line"><span class="lineno">   36</span>                    mlt_readout_map[key][<span class="stringliteral">&quot;elements&quot;</span>][<span class="stringliteral">&quot;Trigger&quot;</span>].append(trigger_sid)</div>
<div class="line"><span class="lineno">   37</span>        <span class="keywordflow">elif</span> isinstance(conf, TPInfo):</div>
<div class="line"><span class="lineno">   38</span>            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> mlt_readout_map.keys():</div>
<div class="line"><span class="lineno">   39</span>                <span class="keywordflow">if</span> key == conf.tp_ru_sid:</div>
<div class="line"><span class="lineno">   40</span>                    mlt_readout_map[key][<span class="stringliteral">&quot;group&quot;</span>] = conf.region_id</div>
<div class="line"><span class="lineno">   41</span>                    mlt_readout_map[key][<span class="stringliteral">&quot;elements&quot;</span>][<span class="stringliteral">&quot;Trigger&quot;</span>].append(conf.tp_ru_sid)</div>
<div class="line"><span class="lineno">   42</span>                    mlt_readout_map[key][<span class="stringliteral">&quot;elements&quot;</span>][<span class="stringliteral">&quot;Trigger&quot;</span>].append(trigger_sid)</div>
<div class="line"><span class="lineno">   43</span>        <span class="keywordflow">elif</span> isinstance(conf, TCInfo):</div>
<div class="line"><span class="lineno">   44</span>            mlt_map_entry = { <span class="stringliteral">&quot;group&quot;</span>: -1, <span class="stringliteral">&quot;elements&quot;</span>: {<span class="stringliteral">&quot;Trigger&quot;</span>: [trigger_sid] } }</div>
<div class="line"><span class="lineno">   45</span>            mlt_readout_map[-1] = mlt_map_entry</div>
<div class="line"><span class="lineno">   46</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   47</span>            <span class="comment"># readout unit</span></div>
<div class="line"><span class="lineno">   48</span>            mlt_map_entry = { <span class="stringliteral">&quot;group&quot;</span>: trigger_sid, <span class="stringliteral">&quot;elements&quot;</span>: { <span class="stringliteral">&quot;Trigger&quot;</span>: [], <span class="stringliteral">&quot;Detector_Readout&quot;</span>: [] } }</div>
<div class="line"><span class="lineno">   49</span>            <span class="keywordflow">for</span> stream <span class="keywordflow">in</span> conf.streams:</div>
<div class="line"><span class="lineno">   50</span>                mlt_map_entry[<span class="stringliteral">&quot;elements&quot;</span>][<span class="stringliteral">&quot;Detector_Readout&quot;</span>].append(stream.src_id)</div>
<div class="line"><span class="lineno">   51</span>            mlt_readout_map[trigger_sid] = mlt_map_entry</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">   54</span>        console.log(f<span class="stringliteral">&quot;MLT Readout Map: {mlt_readout_map}&quot;</span>)</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>    mlt_links = {<span class="stringliteral">&quot;mandatory&quot;</span>: [], <span class="stringliteral">&quot;groups&quot;</span>: []}</div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> mlt_readout_map.keys():</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordflow">if</span> key != -1:</div>
<div class="line"><span class="lineno">   59</span>            mlt_links[<span class="stringliteral">&quot;groups&quot;</span>].append({<span class="stringliteral">&quot;group&quot;</span>: key, <span class="stringliteral">&quot;links&quot;</span>: []})</div>
<div class="line"><span class="lineno">   60</span>    </div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordflow">for</span> producer <span class="keywordflow">in</span> the_system.get_fragment_producers():</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">if</span> producer.is_mlt_producer:</div>
<div class="line"><span class="lineno">   63</span>            source_id = producer.source_id</div>
<div class="line"><span class="lineno">   64</span>            <span class="comment"># case for HSI</span></div>
<div class="line"><span class="lineno">   65</span>            <span class="keywordflow">if</span> source_id.subsystem == SourceID.Subsystem.kHwSignalsInterface:</div>
<div class="line"><span class="lineno">   66</span>                mlt_links[<span class="stringliteral">&quot;mandatory&quot;</span>].append( mlt.SourceID(subsystem=ensure_subsystem_string(source_id.subsystem), element=source_id.id) )</div>
<div class="line"><span class="lineno">   67</span>            <span class="comment"># case for RU</span></div>
<div class="line"><span class="lineno">   68</span>            <span class="keywordflow">elif</span> source_id.subsystem == SourceID.Subsystem.kDetectorReadout:</div>
<div class="line"><span class="lineno">   69</span>                matched = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">   70</span>                <span class="keywordflow">for</span> key <span class="keywordflow">in</span> mlt_readout_map.keys():</div>
<div class="line"><span class="lineno">   71</span>                    <span class="keywordflow">if</span> key != -1:</div>
<div class="line"><span class="lineno">   72</span>                        <span class="keywordflow">if</span> source_id.id <span class="keywordflow">in</span> mlt_readout_map[key][<span class="stringliteral">&quot;elements&quot;</span>][<span class="stringliteral">&quot;Detector_Readout&quot;</span>]:</div>
<div class="line"><span class="lineno">   73</span>                            mlt_links[<span class="stringliteral">&quot;groups&quot;</span>][key][<span class="stringliteral">&quot;links&quot;</span>].append( mlt.SourceID(subsystem=ensure_subsystem_string(source_id.subsystem), element=source_id.id) )</div>
<div class="line"><span class="lineno">   74</span>                            matched = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">   75</span>                <span class="comment"># special case to cover readout that is not a TP source for trigger</span></div>
<div class="line"><span class="lineno">   76</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> matched:</div>
<div class="line"><span class="lineno">   77</span>                    mlt_links[<span class="stringliteral">&quot;groups&quot;</span>].append({<span class="stringliteral">&quot;group&quot;</span>: len(mlt_links[<span class="stringliteral">&quot;groups&quot;</span>]), <span class="stringliteral">&quot;links&quot;</span>: []})</div>
<div class="line"><span class="lineno">   78</span>                    mlt_links[<span class="stringliteral">&quot;groups&quot;</span>][len(mlt_links[<span class="stringliteral">&quot;groups&quot;</span>])-1][<span class="stringliteral">&quot;links&quot;</span>].append( mlt.SourceID(subsystem=ensure_subsystem_string(source_id.subsystem), element=source_id.id) )</div>
<div class="line"><span class="lineno">   79</span>            <span class="comment"># anything else (TP, TA, TC buffers)</span></div>
<div class="line"><span class="lineno">   80</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   81</span>                <span class="keywordflow">for</span> key <span class="keywordflow">in</span> mlt_readout_map.keys():</div>
<div class="line"><span class="lineno">   82</span>                    <span class="keywordflow">if</span> source_id.id <span class="keywordflow">in</span> mlt_readout_map[key][<span class="stringliteral">&quot;elements&quot;</span>][<span class="stringliteral">&quot;Trigger&quot;</span>]:</div>
<div class="line"><span class="lineno">   83</span>                        match key:</div>
<div class="line"><span class="lineno">   84</span>                            case -1:</div>
<div class="line"><span class="lineno">   85</span>                                mlt_links[<span class="stringliteral">&quot;mandatory&quot;</span>].append( mlt.SourceID(subsystem=ensure_subsystem_string(source_id.subsystem), element=source_id.id) )</div>
<div class="line"><span class="lineno">   86</span>                            case _:</div>
<div class="line"><span class="lineno">   87</span>                                mlt_links[<span class="stringliteral">&quot;groups&quot;</span>][key][<span class="stringliteral">&quot;links&quot;</span>].append( mlt.SourceID(subsystem=ensure_subsystem_string(source_id.subsystem), element=source_id.id) )</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">   90</span>        tot = 0</div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">for</span> group <span class="keywordflow">in</span> mlt_links[<span class="stringliteral">&quot;groups&quot;</span>]:</div>
<div class="line"><span class="lineno">   92</span>            tot += len(group[<span class="stringliteral">&quot;links&quot;</span>])</div>
<div class="line"><span class="lineno">   93</span>        tot += len(mlt_links[<span class="stringliteral">&quot;mandatory&quot;</span>])</div>
<div class="line"><span class="lineno">   94</span>        console.log(f<span class="stringliteral">&quot;Adding {tot} links to mlt.links&quot;</span>)</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    mgraph = the_system.apps[mlt_app_name].modulegraph</div>
<div class="line"><span class="lineno">   97</span>    old_mlt_conf = mgraph.get_module(<span class="stringliteral">&quot;mlt&quot;</span>).conf</div>
<div class="line"><span class="lineno">   98</span>    mgraph.reset_module_conf(<span class="stringliteral">&quot;mlt&quot;</span>, mlt.ConfParams(mandatory_links=mlt_links[<span class="stringliteral">&quot;mandatory&quot;</span>],</div>
<div class="line"><span class="lineno">   99</span>                                                   groups_links=mlt_links[<span class="stringliteral">&quot;groups&quot;</span>],</div>
<div class="line"><span class="lineno">  100</span>                                                   hsi_trigger_type_passthrough=old_mlt_conf.hsi_trigger_type_passthrough,</div>
<div class="line"><span class="lineno">  101</span>                                                   merge_overlapping_tcs=old_mlt_conf.merge_overlapping_tcs,</div>
<div class="line"><span class="lineno">  102</span>                           buffer_timeout=old_mlt_conf.buffer_timeout,</div>
<div class="line"><span class="lineno">  103</span>                                                   td_out_of_timeout=old_mlt_conf.td_out_of_timeout,</div>
<div class="line"><span class="lineno">  104</span>                                                   td_readout_limit=old_mlt_conf.td_readout_limit,</div>
<div class="line"><span class="lineno">  105</span>                                                   ignore_tc=old_mlt_conf.ignore_tc,</div>
<div class="line"><span class="lineno">  106</span>                                                   use_readout_map=old_mlt_conf.use_readout_map,</div>
<div class="line"><span class="lineno">  107</span>                                                   td_readout_map=old_mlt_conf.td_readout_map,</div>
<div class="line"><span class="lineno">  108</span>                                                   use_roi_readout=old_mlt_conf.use_roi_readout,</div>
<div class="line"><span class="lineno">  109</span>                                                   roi_conf=old_mlt_conf.roi_conf,</div>
<div class="line"><span class="lineno">  110</span>                           use_bitwords=old_mlt_conf.use_bitwords,</div>
<div class="line"><span class="lineno">  111</span>                           trigger_bitwords=old_mlt_conf.trigger_bitwords))</div>
<div class="line"><span class="lineno">  112</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1d58c7f973e0c848395a9fe1f5ceae3d" name="a1d58c7f973e0c848395a9fe1f5ceae3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d58c7f973e0c848395a9fe1f5ceae3d">&#9670;&#160;</a></span>default_load_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">daqconf.core.fragment_producers.default_load_path</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fragment__producers_8py_source.html#l00004">4</a> of file <a class="el" href="fragment__producers_8py_source.html">fragment_producers.py</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
